<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Práctica 3 | Ibero Puebla</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />

        <style>
            pre {
                background-color: #fefcfc;
                color: #373e43;
                padding: 15px;
                border-radius: 5px;
                overflow-x: auto;
                white-space: pre-wrap; /* Para que el código se ajuste al contenedor */
                font-size: 14px;
                line-height: 1;
            }
        </style>
    </head>
    <body class="d-flex flex-column h-100">
        <main class="flex-shrink-0">
            <!-- Navigation-->
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
                <div class="container px-5">
                    <a class="navbar-brand">Menu</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                            <li class="nav-item"><a class="nav-link" href="../">Home</a></li>                    
                            <li class="nav-item"><a class="nav-link" href="../index.html#resumen">Acerca de mi</a></li>
                            <li class="nav-item"><a class="nav-link" href="../index.html#practicas">Prácticas</a></li>
                        </ul>
                    </div>
                </div>
            </nav>

            <!-- Seccion TITULO de Portafolio-->
            <header class="bg-primary py-2 mt-6">
                <div class="container px-5">
                    <div class="row gx-5 align-items-center justify-content-center">
                        <div class="col-lg-8 col-xl-7 col-xxl-6">
                            <div class="my-5 text-center text-xl-start">
                                <h1 class="display-6 fw-bolder text-white mb-2">Portafolio de Actividades</h1>
                                <h1 class="display-8 fw-bolder text-white mb-2">Laboratorio de Redes Digitales de Datos</h1>
                                <p id="resumen" class="display-8 fw-normal text-white-50 mb-4">Departamento de Ciencias e Ingenierías | Universidad Iberoamericana Puebla, México.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Seccion TITULO de la Práctica-->
            <section class="py-3" id="scroll-target">
                <div class="container px-5 my-2">
                    <!-- Post header-->
                    <header class="mb-4">
                        <!-- Post title-->
                        <h1 class="fw-bolder mb-1">Wifi ESP32 – Thingspeak</h1>

                        <!-- ETIQUETA DE ALUMNO (Hacer una por cada alumno)-->
                            <div class="ms-2">
                                <div class="fw-bold">Augusto Mantilla Molina</div>
                                <div class="text-muted">Ingeniería Mecatrónica</div>
                            </div>

                            <div class="ms-2">
                                <div class="fw-bold">Jorge Eduardo Limón Balderas</div>
                                <div class="text-muted">Ingeniería Mecatrónica</div>
                            </div>
                        <!--Aqui termina etiqueta de alumno-->

                        <div class="text-muted fst-italic mt-2 mb-2">Fecha: Febrero 12, 2025</div>
                        <!-- ETIQUETAS O TOPICOS IMPORTANTES DE LA PRACTICA-->
                        <a class="badge bg-primary text-decoration-none link-light" >ESP32</a>
                        <a class="badge bg-primary text-decoration-none link-light" >Wokwi</a>
                        <a class="badge bg-primary text-decoration-none link-light" >Sensores</a>

                    </header>
                </div>
            </section>

            <!-- Seccion de CONTENIDO de la Práctica-->
            <section>
                <div class="container px-5">

                    <figure class="mb-4"><img class="img-fluid rounded" width="800px" src="img/thingspeak.webp" alt="..." /></figure>
                                
                    <p id="resumen">
                        <h2 class="fw-bolder mb-4 mt-5 fs-5" >- Resumen -</h2>
                        <p class="fs-6 mb-4">
                            En esta práctica, se implementa la plataforma ThingSpeak para la recopilación y monitoreo de datos 
                            en la nube, utilizando un módulo ESP32-C6. Se configura la conectividad WiFi para la transmisión de 
                            datos en tiempo real y se integran sensores digitales, analógicos e inteligentes. Además, se 
                            incorpora un sensor PIR para la detección de movimiento, permitiendo su visualización en un tablero 
                            público en ThingSpeak. Se emplea Arduino IDE para la programación y pruebas iniciales, y se realizan 
                            simulaciones en Wokwi antes del montaje en hardware, garantizando su correcto funcionamiento. 
                            Esta práctica refuerza conocimientos en IoT, redes inalámbricas y procesamiento de datos en la nube.
                        </p>
                                                                    
                        <p id="intro">

                        
                        <h2 class="fw-bolder mb-4 mt-5 fs-5" >- Introducción -</h2>
                        <p class="fs-6 mb-4">
                            La interconectividad entre sensores y plataformas IoT es clave para la automatización y supervisión 
                            remota de sistemas electrónicos. ThingSpeak es una plataforma en la nube que permite visualizar y 
                            analizar datos en tiempo real, facilitando su integración con microcontroladores como el ESP32-C6.
                        </p>
                        <p class="fs-6 mb-4">
                            En esta práctica, se configura la conexión del ESP32-C6 a redes WiFi, permitiendo la transmisión de 
                            datos de sensores digitales, analógicos e inteligentes a un tablero público en ThingSpeak para su 
                            monitoreo a distancia. Además, se realizan pruebas en Wokwi antes de la implementación física para 
                            asegurar un correcto funcionamiento.
                        </p>
                        
                        <p id="materiales">
                        <h2 class="fw-bolder mb-4 mt-5 fs-5" >- Materiales -</h2>
                        <p class="fs-6 mb-4">
                            <ul>
                                <li><b>ESP32: </b>1</li>
                                <li><b>LEDs: </b>1</li>
                                <li><b>Resistencia 220Ω: </b>1</li>
                                <li><b>Botones: </b>1</li>
                                <li><b>Resistencias 1KΩ:</b>2</li>
                                <li><b>Potenciómetro: </b>1</li>
                                <li><b>DHT22: </b>1</li>
                                <li><b>PIR: </b>1</li>
                                <li><b>Protoboard: </b>1</li>
                                <li><b>Cables: </b>16</li>
                            </ul>
                        </p>
                        <p id="desarrollo">
                        <h2 class="fw-bolder mb-4 mt-5 fs-5">- Desarrollo -</h2>
                        <p class="fs-6 mb-4">
                            En esta sección, se detallará el proceso completo para la simulación y construcción del circuito 
                            utilizando sensores digitales, analógicos e inteligentes con el ESP32-C6. Se explicará cada etapa, 
                            desde la configuración del entorno de desarrollo en Wokwi o Arduino IDE, hasta la implementación del 
                            código y la conexión de los sensores. Además, se abordará la integración con la plataforma ThingSpeak 
                            para la transmisión y monitoreo de datos en la nube.
                        </p>
                            <h2 class="fw-bolder2 mb-4 mt-5 fs-5">Escaneo WiFi</h2>
                            <p class="fs-6 mb-4">
                                En la función setup(), se inicia la comunicación serial a 115200 baudios y se configura el 
                                ESP32 en modo estación (WIFI_STA). En la función loop(), el ESP32 escanea las redes WiFi 
                                cercanas usando WiFi.scanNetworks(), y muestra en el monitor serial la cantidad de redes 
                                encontradas junto con su SSID (nombre), la intensidad de la señal (RSSI) y si la red está 
                                protegida o es abierta. Luego, espera 5 segundos antes de realizar un nuevo escaneo.
                            </p>

                            <pre>
                                #include "WiFi.h"

                                void setup() {
                                Serial.begin(115200);
                                Serial.println("Inicializando WiFi...");
                                
                                WiFi.mode(WIFI_STA);
                                Serial.println("Configuración terminada!");
                                }

                                void loop() {
                                Serial.println("Escaneando...");
                                
                                int n = WiFi.scanNetworks();
                                Serial.println("Escaneo terminado!");
                                
                                if (n == 0) {
                                    Serial.println("No se encontraron redes.");
                                } else {
                                    Serial.println();
                                    Serial.print(n);
                                    Serial.println(" redes encontradas");
                                    
                                    for (int i = 0; i < n; ++i) {
                                    Serial.print(i + 1);
                                    Serial.print(": ");
                                    Serial.print(WiFi.SSID(i));
                                    Serial.print(" (");
                                    Serial.print(WiFi.RSSI(i));
                                    Serial.print(")");
                                    Serial.println((WiFi.encryptionType(i) == WIFI_AUTH_OPEN) ? " " : "*");
                                    
                                    delay(10);
                                    }
                                }
                                Serial.println("");
                                delay(5000);
                                }
                            </pre>

                            <h1 class="fw-bolder2 mb-4 mt-5 fs-5"><b>Simulación</b></h1>
                            <iframe
                                src="https://wokwi.com/projects/426706745269998593"
                                width="100%"
                                height="600px"
                                style="border: none;">
                            </iframe>

                            <h1 class="fw-bolder2 mb-4 mt-5 fs-5"><b>Video</b></h1>
                            <center>
                                <figure class="mb-4" align="center">
                                    <video width="55%" height="300" controls>
                                        <source src="video/ESP32_ESCANEO_WIFI.mp4" type="video/mp4">
                                    </video>
                                </figure>
                            </center>
                            <p class="fs-6 mb-4">Descargar codigo: <a href="files/esp32_escaneo_wifi.ino">ESP32 Escaneo WiFi</a> </p>


                            <h2 class="fw-bolder2 mb-4 mt-5 fs-5">Sensor Digital</h2>
                            <p class="fs-6 mb-4">
                                En la función setup(), se configura la conexión WiFi al comenzar con los parámetros de red, y se 
                                establece la comunicación serial. Luego, en la función loop(), se lee el estado del botón y, en 
                                función de su valor, se enciende o apaga el LED. Además, si el ESP32 está conectado a WiFi, se 
                                construye y envía una solicitud HTTP GET a ThingSpeak para actualizar el valor del botón.
                            </p>
                            
                            <pre>
                                    #include <WiFi.h>
                                    #include <HTTPClient.h>
                                    
                                    int boton = 4;
                                    int led = 1;
                                    
                                    int status_boton = 0;
                                    
                                    String url = "https://api.thingspeak.com/update?";
                                    String api_key = "NZUJ6QMBRY8VJSTS";
                                    String sensor = "field1";
                                    
                                    void setup() {
                                      pinMode(led, OUTPUT);
                                      pinMode(boton, INPUT);
                                    
                                      delay(1000);
                                      Serial.begin(115200);
                                        
                                      WiFi.begin("Guty", "123456789");
                                    
                                      while ((WiFi.status() != WL_CONNECTED)) {
                                        delay(500);
                                        Serial.print(".");
                                      }   
                                      Serial.println("WiFi conectado");
                                    }
                                    
                                    void loop() {
                                      status_boton = digitalRead(boton);
                                    
                                      if (status_boton == 1) {
                                        digitalWrite(led, HIGH);
                                      } else {
                                        digitalWrite(led, LOW);
                                      }
                                    
                                      if ((WiFi.status() == WL_CONNECTED)) {
                                        HTTPClient http;
                                    
                                        String message = url + "api_key=" + api_key + "&" + sensor + "=" + String(status_boton);
                                        http.begin(message);
                                    
                                        int httpCode = http.GET();
                                        Serial.println(message);
                                        Serial.print("Código GET: ");
                                        Serial.println(httpCode);
                                    
                                        http.end();
                                      }
                                    
                                      delay(3000);
                                    }
                                    
                            </pre>
                            
                            <h1 class="fw-bolder2 mb-4 mt-5 fs-5"><b>Simulación</b></h1>
                        <div style="display: flex; justify-content: center; align-items: center; overflow: hidden; margin: 0;">
                            <iframe
                                src="https://wokwi.com/projects/426710170856835073"
                                width="800px"
                                height="600px"
                                style="border: none; display: block;">
                            </iframe>
                        </div>

                        <div style="display: flex; justify-content: center; align-items: center; overflow: hidden; margin: 0;">
                            <center>
                                <iframe
                                src="https://thingspeak.mathworks.com/channels/2838541/charts/1?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15"
                                width="800px"
                                height="600px"
                                style="border: none; display: block;">
                            </iframe>
                            </center>
                        </div>



                            <h1 class="fw-bolder2 mb-4 mt-5 fs-5"><b>Video</b></h1>
                            <center>
                                <figure class="mb-4" align="center">
                                    <video width="55%" height="300" controls>
                                        <source src="video/ESP32_WIFI_BOTON.mp4" type="video/mp4">
                                    </video>
                                </figure>
                            </center>
                            <p class="fs-6 mb-4">Descargar codigo: <a href="files/esp32_wifi_boton.ino">ESP32 Botón WiFi</a> </p>


                            <h1 class="fw-bolder2 mb-4 mt-5 fs-5">Sensor Analógico</h1>
                            <p class="fs-6 mb-4">
                                Los sensores analógicos proporcionan valores de salida continuos que varían en un rango de 
                                voltaje, dependiendo de la resolución del ADC del microcontrolador. En el caso del ESP32 
                                tiene un ADC de 12 bits, los valores van de 0 a 4096. Para realizar la lectura de estos 
                                valores, se utiliza un GPIO con un canal analógico, permitiendo medir la variación de 
                                voltaje del sensor y obtener datos más precisos.
                            </p>

                            <h2 class="fw-bolder2 mb-4 mt-5 fs-5">Potenciómetro
                            <p class="fs-6 mb-4">
                                En este código se configura el pin 23 como salida para controlar un LED, y el pin 34 como 
                                entrada para leer el valor de un potenciómetro. En la función loop(), que se ejecuta en un 
                                bucle infinito, se lee el valor analógico del potenciómetro. Si el valor leído es mayor o 
                                igual a 1024, el LED se enciende, de lo contrario, el LED se apaga.
                            </p>
                            
                            <pre>
                                int led=23;
                                int pot=34;
                                
                                int potValue=0;
                                
                                void setup() {
                                  // put your setup code here, to run once:
                                  pinMode(23,OUTPUT);
                                  pinMode(34,INPUT);
                                }
                                
                                void loop() {
                                  
                                  potValue=analogRead(pot);
                                
                                  if(potValue>=1024){
                                    digitalWrite(led,HIGH);
                                  }
                                  else{
                                    digitalWrite(led,LOW);
                                  }
                                
                                }                             
                            </pre>

                            <h1 class="fw-bolder2 mb-4 mt-5 fs-5"><b>Simulación</b></h1>
                            <iframe
                                src="https://wokwi.com/projects/423297372636341249"
                                width="100%"
                                height="600px"
                                style="border: none;">
                            </iframe>

                            <h1 class="fw-bolder2 mb-4 mt-5 fs-5"><b>Video</b></h1>
                            <center>
                                <figure class="mb-4" align="center">
                                    <video width="55%" height="300" controls>
                                        <source src="video/ESP32_POTENCIOMETRO.mp4" type="video/mp4">
                                    </video>
                                </figure>
                            </center>
                            <p class="fs-6 mb-4">Descargar codigo: <a href="files/ESP32_POTENCIOMETRO.ino">ESP32_POTENCIOMETRO</a> </p>

                            <h1 class="fw-bolder2 mb-4 mt-5 fs-5">Sensor Inteligente</h1>
                            <p class="fs-6 mb-4">
                                Los sensores inteligentes son dispositivos que van más allá de las simples lecturas digitales o 
                                analógicas, ya que su funcionamiento o complejidad requiere el uso de protocolos de 
                                comunicación, puertos específicos del microcontrolador o medición de tiempos. Estos sensores 
                                suelen ser más sofisticados.
                            </p>

                            <h2 class="fw-bolder2 mb-4 mt-5 fs-5">DHT22
                            <p class="fs-6 mb-4">
                                En este código se configura el pin 23 como salida para controlar un LED y se utiliza el sensor 
                                DHT22 conectado al pin 33 para medir la temperatura y la humedad. En la función loop(), que se 
                                ejecuta continuamente, el sensor lee la temperatura y la humedad cada segundo. Estos valores 
                                se envían al monitor seria. Si la humedad medida es mayor o igual al 50%, el LED se enciende, 
                                y si la humedad es menor a ese valor, el LED se apaga.
                            </p>
                            
                            <pre>
                                int led=23;
                                int temperatura=0;
                                int humedad=0;
                                #include <DHT.h>
                                DHT dht(33,DHT22);

                                void setup() {
                                    // put your setup code here, to run once:
                                    pinMode(23,OUTPUT);
                                    dht.begin();
                                    Serial.begin(115200);
                                }

                                void loop() {
                                delay(1000);
                                temperatura=dht.readTemperature();
                                humedad=dht.readHumidity();

                                Serial.print("Temperatura:");
                                Serial.println(temperatura);
                                Serial.print("Humedad:");
                                Serial.println(humedad);

                                if(humedad>=50){
                                    digitalWrite(led,HIGH);
                                }
                                else{
                                    digitalWrite(led,LOW);
                                }
                            }                 
                            </pre>

                            <h1 class="fw-bolder2 mb-4 mt-5 fs-5"><b>Simulación</b></h1>
                            <iframe
                                src="https://wokwi.com/projects/423298701672146945"
                                width="100%"
                                height="600px"
                                style="border: none;">
                            </iframe>

                            <h1 class="fw-bolder2 mb-4 mt-5 fs-5"><b>Video</b></h1>
                            <center>
                                <figure class="mb-4" align="center">
                                    <video width="55%" height="300" controls>
                                        <source src="video/ESP32_DHT.mp4" type="video/mp4">
                                    </video>
                                </figure>
                            </center>
                            <p class="fs-6 mb-4">Descargar codigo: <a href="files/ESP32_DHT.ino">ESP32_DHT</a> </p>


                            <h2 class="fw-bolder2 mb-4 mt-5 fs-5">PIR
                            <p class="fs-6 mb-4">
                                En este código se configura el pin 23 como salida para controlar un LED y el pin 33 como entrada 
                                para leer el estado de un sensor PIR. En la función loop(), que se ejecuta de manera continua, 
                                se lee el estado del sensor PIR. Si se detecta movimiento, el LED se enciende y, si el 
                                movimiento se detiene, el LED se apaga. 
                            </p>
                            
                            <pre>
                                #define led 23               
                                #define PIR 33             
                                
                                //Variables globales
                                int pirState = LOW;           
                                int val = 0;                
                                
                                void setup() {
                                    pinMode(led, OUTPUT);   
                                    pinMode(PIR, INPUT);   
                                    Serial.begin(115200);
                                }
                                
                                void loop() {
                                    val = digitalRead(PIR);  
                                    if (val == HIGH) {            
                                        digitalWrite(led, HIGH); 
                                        if (pirState == LOW) {
                                            Serial.println("Motion detected!");
                                            pirState = HIGH;
                                        }
                                    } else {
                                        digitalWrite(led, LOW); 
                                        if (pirState == HIGH) {
                                            Serial.println("Motion ended!");
                                            pirState = LOW;
                                        }
                                    }
                                }                
                            </pre>

                            <h1 class="fw-bolder2 mb-4 mt-5 fs-5"><b>Simulación</b></h1>
                            <iframe
                                src="https://wokwi.com/projects/423299778674216961"
                                width="100%"
                                height="600px"
                                style="border: none;">
                            </iframe>

                            <h1 class="fw-bolder2 mb-4 mt-5 fs-5"><b>Video</b></h1>
                            <center>
                                <figure class="mb-4" align="center">
                                    <video width="55%" height="300" controls>
                                        <source src="video/ESP32_PIR.mp4" type="video/mp4">
                                    </video>
                                </figure>
                            </center>
                            <p class="fs-6 mb-4">Descargar codigo: <a href="files/ESP32_PIR.ino">ESP32_PIR</a> </p>

                        <p id="conclusiones">
                        <h2 class="fw-bolder mb-4 mt-5 fs-5">- Conclusiones -</h2>
                        <p class="fs-6 mb-4">
                            A lo largo de la práctica se exploraron y comprendieron los principios de funcionamiento de los 3
                            diferentes tipos de sensores: digitales, analógicos e inteligentes, utilizando el ESP32. Se 
                            configuraron los pines de entrada y salida de manera adecuada, tanto para leer las señales de los 
                            sensores como para controlar el LED que había conectado. 
                        </p>

                        <p class="fs-6 mb-4">
                            Además, se utilizó la comunicación serial para mostrar los datos capturados por los sensores, lo 
                            que proporcionó una retroalimentación importante sobre el comportamiento del sistema.
                        </p>

                        <p id="referencias">
                        <h2 class="fw-bolder mb-4 mt-5 fs-5">- Referencias -</h2>
                        <p class="fs-6 mb-4">¿Qué es un sensor y qué hace? (2024, 21 noviembre). Soluciones de Adquisición de Datos (DAQ).<a href="https://dewesoft.com/es/blog/que-es-un-sensor">https://dewesoft.com/es/blog/que-es-un-sensor</a></p>
                        
                        <p id="descargables">
                        <h2 class="fw-bolder mb-4 mt-5 fs-5">- Descargables -</h2>
                        <p class="fs-6 mb-4">Descargar datasheet ESP32 en documento PDF: <a href="files/esp32-wroom-32_datasheet_en.pdf">ESP32 Datasheet</a> </p>
                        <p class="fs-6 mb-4">Descargar carpeta con todos los codigos: <a href="files/Códigos.zip">CODIGOS</a> </p>

                </div>
            </section>

            
        </main>

        <!-- Footer-->
        <footer class="bg-dark py-4 mt-auto">
            <div class="container px-5">
                <div class="row align-items-center justify-content-between flex-column flex-sm-row">
                    <div class="col-auto"><div class="small m-0 text-white">Copyright &copy; Ingenierias-iberopuebla.mx 2023</div></div>
                    <div class="col-auto">
                        <a class="link-light small" href="#!">Privacy</a>
                        <span class="text-white mx-1">&middot;</span>
                        <a class="link-light small" href="#!">Terms</a>
                        <span class="text-white mx-1">&middot;</span>
                        <a class="link-light small" href="#!">Contact</a>
                    </div>
                </div>
            </div>
        </footer>

        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
