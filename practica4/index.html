<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Práctica 3 | Ibero Puebla</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />

        <style>
            pre {
                background-color: #fefcfc;
                color: #373e43;
                padding: 15px;
                border-radius: 5px;
                overflow-x: auto;
                white-space: pre-wrap; /* Para que el código se ajuste al contenedor */
                font-size: 14px;
                line-height: 1;
            }
        </style>
    </head>
    <body class="d-flex flex-column h-100">
        <main class="flex-shrink-0">
            <!-- Navigation-->
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
                <div class="container px-5">
                    <a class="navbar-brand">Menu</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                            <li class="nav-item"><a class="nav-link" href="../">Home</a></li>                    
                            <li class="nav-item"><a class="nav-link" href="../index.html#resumen">Acerca de mi</a></li>
                            <li class="nav-item"><a class="nav-link" href="../index.html#practicas">Prácticas</a></li>
                        </ul>
                    </div>
                </div>
            </nav>

            <!-- Seccion TITULO de Portafolio-->
            <header class="bg-primary py-2 mt-6">
                <div class="container px-5">
                    <div class="row gx-5 align-items-center justify-content-center">
                        <div class="col-lg-8 col-xl-7 col-xxl-6">
                            <div class="my-5 text-center text-xl-start">
                                <h1 class="display-6 fw-bolder text-white mb-2">Portafolio de Actividades</h1>
                                <h1 class="display-8 fw-bolder text-white mb-2">Laboratorio de Redes Digitales de Datos</h1>
                                <p id="resumen" class="display-8 fw-normal text-white-50 mb-4">Departamento de Ciencias e Ingenierías | Universidad Iberoamericana Puebla, México.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Seccion TITULO de la Práctica-->
            <section class="py-3" id="scroll-target">
                <div class="container px-5 my-2">
                    <!-- Post header-->
                    <header class="mb-4">
                        <!-- Post title-->
                        <h1 class="fw-bolder mb-1">Frontend y Backend</h1>

                        <!-- ETIQUETA DE ALUMNO (Hacer una por cada alumno)-->
                            <div class="ms-2">
                                <div class="fw-bold">Augusto Mantilla Molina</div>
                                <div class="text-muted">Ingeniería Mecatrónica</div>
                            </div>

                            <div class="ms-2">
                                <div class="fw-bold">Jorge Eduardo Limón Balderas</div>
                                <div class="text-muted">Ingeniería Mecatrónica</div>
                            </div>
                        <!--Aqui termina etiqueta de alumno-->

                        <div class="text-muted fst-italic mt-2 mb-2">Fecha: Febrero 19, 2025</div>
                        <!-- ETIQUETAS O TOPICOS IMPORTANTES DE LA PRACTICA-->
                        <a class="badge bg-primary text-decoration-none link-light" >ESP32</a>
                        <a class="badge bg-primary text-decoration-none link-light" >Wokwi</a>
                        <a class="badge bg-primary text-decoration-none link-light" >Sensores</a>

                    </header>
                </div>
            </section>

            <!-- Seccion de CONTENIDO de la Práctica-->
            <section>
                <div class="container px-5">

                    <figure class="mb-4"><img class="img-fluid rounded" width="800px" src="img/Frontend-vs.-Backend-ENG.png" alt="..." /></figure>
                                
                    <p id="resumen">
                        <h2 class="fw-bolder mb-4 mt-5 fs-5" >- Resumen -</h2>
                        <p class="fs-6 mb-4">
                            En esta práctica, se integran múltiples sensores con un ESP32 para recopilar y visualizar datos en 
                            tiempo real. Se utilizan un sensor digital, un sensor analógico y un sensor inteligente, cuyos 
                            valores son procesados y enviados a una plataforma web. A través de un panel interactivo, los 
                            usuarios pueden monitorear las variaciones de los sensores en tiempo real, aprovechando las 
                            capacidades de conectividad del ESP32 para la transmisión de datos de manera eficiente.
                        </p>
                                                                    
                        <p id="intro">

                        
                        <h2 class="fw-bolder mb-4 mt-5 fs-5" >- Introducción -</h2>
                        <p class="fs-6 mb-4">
                            El monitoreo en tiempo real de variables a través de sensores es una parte fundamental en el 
                            desarrollo de aplicaciones IoT. Gracias a microcontroladores como el ESP32, que cuenta con 
                            conectividad WiFi y múltiples pines de entrada/salida, es posible recopilar, procesar y transmitir 
                            datos de diferentes sensores a una plataforma web para su visualización y análisis.
                        </p>
                        <p class="fs-6 mb-4">
                            En esta práctica, se integran sensores digitales, analógicos e inteligentes con un ESP32 para 
                            capturar información en tiempo real y enviarla a un servidor web. A través de un panel 
                            interactivo, los datos pueden ser monitoreados de manera remota, permitiendo un análisis eficiente 
                            sin depender de plataformas externas.
                        </p>
                        
                        <p id="materiales">
                        <h2 class="fw-bolder mb-4 mt-5 fs-5" >- Materiales -</h2>
                        <p class="fs-6 mb-4">
                            <ul>
                                <li><b>ESP32: </b>1</li>
                                <li><b>LEDs: </b>1</li>
                                <li><b>Resistencia 220Ω: </b>1</li>
                                <li><b>Botones: </b>1</li>
                                <li><b>Resistencias 1KΩ:</b>1</li>
                                <li><b>Potenciómetro: </b>1</li>
                                <li><b>DHT22: </b>1</li>
                                <li><b>PIR: </b>1</li>
                                <li><b>Protoboard: </b>1</li>
                                <li><b>Cables: </b>28</li>
                            </ul>
                        </p>
                        <p id="desarrollo">
                        <h2 class="fw-bolder mb-4 mt-5 fs-5">- Desarrollo -</h2>
                        <p class="fs-6 mb-4">
                            Después de haber realizado los ejercicios presentados en las diapositivas proporcionadas por el 
                            profesor, podemos comenzar a desarrollar nuestra propia página para crear un panel interactivo. 
                            Este panel funciona de la siguiente manera: si el botón está presionado, el LED se enciende y en el 
                            panel aparecerá un botón de color verde; de lo contrario, estará en rojo. Para el potenciómetro, se 
                            leerá su valor en tiempo real. En el caso del sensor PIR, se mostrará un ícono de alto cuando no 
                            detecte movimiento y un letrero de una persona caminando cuando lo detecte. Finalmente, el sensor 
                            DHT22 permitirá visualizar en tiempo real una tabla con la variación de la temperatura.
                        </p>
                            <pre>
                                    #include <WiFi.h>
                                    #include <HTTPClient.h>
                                    #include <DHT.h>
                                    
                                    // Puertos GPIO
                                    int boton = 4;
                                    int led = 5;
                                    int potenciometro = 6; // GPIO para el potenciómetro
                                    int pir = 7; // GPIO para el sensor PIR
                                    DHT dht(0, DHT22);
                                    
                                    // Variables status
                                    int status_boton = 0;
                                    int valor_potenciometro = 0;
                                    int status_pir = 0;
                                    int valor_temperatura = 0;
                                    
                                    // PHP server
                                    String url = "https://api.thingspeak.com/update?";
                                    String api_key = "NZUJ6QMBRY8VJSTS";
                                    String sensordht = "field5";
                                    String url_boton = "https://58632bcd-835e-42f9-9ecc-644a33682562-00-1229jg7ktjbyb.janeway.replit.dev/sensor1/?";
                                    String url_potenciometro = "https://58632bcd-835e-42f9-9ecc-644a33682562-00-1229jg7ktjbyb.janeway.replit.dev/sensor2/?";
                                    String url_pir = "https://58632bcd-835e-42f9-9ecc-644a33682562-00-1229jg7ktjbyb.janeway.replit.dev/sensor3/?";
                                    String sensor = "DATO";
                                    
                                    void setup() {
                                        // Configuración de pines
                                        pinMode(boton, INPUT);
                                        pinMode(led, OUTPUT);
                                        pinMode(potenciometro, INPUT);
                                        pinMode(pir, INPUT);
                                        dht.begin();
                                    
                                        delay(1000);
                                        Serial.begin(115200);
                                        
                                        WiFi.begin("Guty", "123456789"); // WiFi_Network, WiFi_Password
                                    
                                        // Wait until connection
                                        while (WiFi.status() != WL_CONNECTED) {
                                            delay(500);
                                            Serial.print(".");
                                        }
                                        Serial.println("WiFi connected");
                                    }
                                    
                                    void loop(){
                                        status_boton = digitalRead(boton);
                                        valor_potenciometro = analogRead(potenciometro); // Leer el valor del potenciómetro
                                        status_pir = digitalRead(pir); // Leer el estado del sensor PIR
                                        valor_temperatura = dht.readTemperature();
                                    
                                        if(status_boton == 1){
                                            digitalWrite(led, HIGH);
                                        } else {
                                            digitalWrite(led, LOW);
                                        }
                                    
                                        // Wait for WiFi connection
                                        if(WiFi.status() == WL_CONNECTED) {
                                            HTTPClient http;
                                            
                                            // Enviar estado del botón
                                            String message_boton = url_boton + sensor + "=" + String(status_boton);
                                            http.begin(message_boton);
                                            int httpCode_boton = http.GET();
                                            Serial.println(message_boton);
                                            Serial.print("GET code (boton): ");
                                            Serial.println(httpCode_boton);
                                            http.end();
                                            
                                            // Enviar valor del potenciómetro
                                            String message_potenciometro = url_potenciometro + sensor + "=" + String(valor_potenciometro);
                                            http.begin(message_potenciometro);
                                            int httpCode_potenciometro = http.GET();
                                            Serial.println(message_potenciometro);
                                            Serial.print("GET code (potenciómetro): ");
                                            Serial.println(httpCode_potenciometro);
                                            http.end();
                                            
                                            // Enviar estado del sensor PIR
                                            String message_pir = url_pir + sensor + "=" + String(status_pir);
                                            http.begin(message_pir);
                                            int httpCode_pir = http.GET();
                                            Serial.println(message_pir);
                                            Serial.print("GET code (PIR): ");
                                            Serial.println(httpCode_pir);
                                            http.end();
                                    
                                            String message = url + "api_key=" + api_key + "&" + sensordht + "=" + String(valor_temperatura);
                                            http.begin(message);
                                            int httpCode = http.GET();
                                            Serial.println(message);
                                            Serial.print("Código GET: ");
                                            Serial.println(httpCode);
                                            http.end();
                                        }
                                        
                                        delay(3000);
                                    }             
                            </pre>

                            <h1 class="fw-bolder2 mb-4 mt-5 fs-5"><b>Simulación</b></h1>
                            <iframe
                                src="https://wokwi.com/projects/427098690537330689"
                                width="100%"
                                height="600px"
                                style="border: none;">
                            </iframe>

                            <h1 class="fw-bolder2 mb-4 mt-5 fs-5"><b>Video</b></h1>
                            <center>
                                <figure class="mb-4" align="center">
                                    <video width="55%" height="300" controls>
                                        <source src="video/muchos sensores.mp4" type="video/mp4">
                                    </video>
                                </figure>
                            </center>
                            <p class="fs-6 mb-4">Descargar codigo: <a href="files/muchos_sensores.ino">ESP32 con panel</a> </p>

                        <p id="conclusiones">
                        <h2 class="fw-bolder mb-4 mt-5 fs-5">- Conclusiones -</h2>
                        <p class="fs-6 mb-4">
                            Esta práctica resalta la capacidad del ESP32 para gestionar y transmitir datos de múltiples sensores 
                            de manera eficiente. La integración de sensores digitales, analógicos e inteligentes demuestra su 
                            versatilidad en aplicaciones de IoT, permitiendo el monitoreo en tiempo real sin necesidad de 
                            plataformas externas.
                        </p>

                        <p id="referencias">
                        <h2 class="fw-bolder mb-4 mt-5 fs-5">- Referencias -</h2>
                        <p class="fs-6 mb-4">¿Qué es un sensor y qué hace? (2024, 21 noviembre). Soluciones de Adquisición de Datos (DAQ).<a href="https://dewesoft.com/es/blog/que-es-un-sensor">https://dewesoft.com/es/blog/que-es-un-sensor</a></p>
                        
                        <p id="descargables">
                        <h2 class="fw-bolder mb-4 mt-5 fs-5">- Descargables -</h2>
                        <p class="fs-6 mb-4">Descargar datasheet ESP32 en documento PDF: <a href="files/esp32-wroom-32_datasheet_en.pdf">ESP32 Datasheet</a> </p>
                        <p class="fs-6 mb-4">Descargar carpeta con todos los codigos: <a href="files/muchos_sensores.ino">CODIGOS</a> </p>

                </div>
            </section>

            
        </main>

        <!-- Footer-->
        <footer class="bg-dark py-4 mt-auto">
            <div class="container px-5">
                <div class="row align-items-center justify-content-between flex-column flex-sm-row">
                    <div class="col-auto"><div class="small m-0 text-white">Copyright &copy; Ingenierias-iberopuebla.mx 2023</div></div>
                    <div class="col-auto">
                        <a class="link-light small" href="#!">Privacy</a>
                        <span class="text-white mx-1">&middot;</span>
                        <a class="link-light small" href="#!">Terms</a>
                        <span class="text-white mx-1">&middot;</span>
                        <a class="link-light small" href="#!">Contact</a>
                    </div>
                </div>
            </div>
        </footer>

        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
